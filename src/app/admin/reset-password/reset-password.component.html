<div class="container">
    <div class="row justify-content-center">
        <div class="col-lg-4 col-md-6" [ngClass]="loading ? 'loading': ''">
            <div class="card" *ngIf="pageState === ASK_PASSWORD">
                <div class="card-header">
                    Reset Password
                </div>
                <form class="card-body" (ngSubmit)="onSubmit()" [formGroup]="resetForm">
                    <section>
                        <mat-form-field class="d-block mb-3">
                            <mat-label>Mobile Number</mat-label>
                            <input type="text" name="mobile" formControlName="mobile" matInput required>
                            <mat-error *ngIf="mobile.hasError('pattern')">
                                Invalid Mobile Number
                            </mat-error>
                            <mat-error *ngIf="mobile.hasError('mobileNotAvailable')">
                                Mobile Not Registered
                            </mat-error>
                        </mat-form-field>
                        <mat-form-field class="d-block mb-3">
                            <mat-label>Password</mat-label>
                            <input type="text" name="password" formControlName="password" matInput required>
                        </mat-form-field>
                    </section>

                    <section [hidden]="mobile.status === 'PENDING'">
                        <button type="submit" mat-raised-button color="primary" class="btn mr-2">
                            Preview
                        </button>
                        <button type="reset" mat-raised-button color="warn" class="btn">
                            Reset
                        </button>
                    </section>
                </form>
            </div>
            <div class="card" *ngIf="pageState === SHOW_PREVIEW">
                <div class="card-body text-center">
                    <table class="table">
                        <tbody>
                            <tr>
                                <th>Mobile</th>
                                <td class="text-left">{{ mobile.value }}</td>
                            </tr>
                            <tr>
                                <th>Password</th>
                                <td class="text-left">{{ password.value }}</td>
                            </tr>
                        </tbody>
                    </table>

                    <button type="button" mat-raised-button color="primary" class="btn mr-2" (click)="onChangePassword()">Change Password</button>
                    <button type="button" mat-raised-button color="link" (click)="pageState = ASK_PASSWORD">Go Back</button>
                </div>
            </div>

            <div class="card bg-success" *ngIf="pageState === SHOW_RESULT">
                <div class="card-header">
                    Password Changed Success
                </div>
                <div class="card-body text-center">
                    <div class="d-block">
                        Mobile - <strong>{{ mobile. value }}</strong>
                    </div>
                    <div class="d-block">
                        Password - <strong>{{ password.value }}</strong>
                    </div>

                    <button mat-stroked-button color="link" class="btn mt-3 w-100" (click)="resetForm.reset();pageState=ASK_PASSWORD">
                        Go Back
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>